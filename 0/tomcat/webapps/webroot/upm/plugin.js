!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){n===undefined&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){n===undefined&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(11),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),o=i(4),s=window.BI,r=function(){function e(){}return e.prototype.isDesigner=function(){return!!window.PluginHelper&&window.PluginHelper.isDesigner()},e.prototype.setLoginUser=function(e){this.loginUser=e},e.prototype.reload=function(){if(window.PluginHelper)return window.PluginHelper.reload();n["default"].reload()},e.prototype.update=function(e){if(window.PluginHelper)return window.PluginHelper.update(e);n["default"].update(e)},e.prototype.closeWindow=function(){if(window.PluginHelper)return window.PluginHelper.closeWindow();console.log("关闭窗口")},e.prototype.getInstalledPlugins=function(e){if(window.PluginHelper)return window.PluginHelper.getInstalledPlugins(e);n["default"].getInstalledPlugins(e)},e.prototype.getPluginCategories=function(e){window.PluginHelper?window.PluginHelper.getPluginCategories(e):n["default"].getPluginCategories(e)},e.prototype.getPlugin=function(e,t){window.PluginHelper?window.PluginHelper.isDesigner()&&window.PluginHelper.getPluginFromStoreNew===undefined?window.PluginHelper.getPluginFromStore(e.categories,e.seller,e.fee,t):window.PluginHelper.getPluginFromStoreNew(JSON.stringify(e),t):n["default"].getPlugin(e,t)},e.prototype.searchPlugin=function(e,t){window.PluginHelper?window.PluginHelper.searchPlugin(encodeURI(e),t):n["default"].searchPlugin(encodeURI(e),t)},e.prototype.getPluginPrefix=function(e){window.PluginHelper?window.PluginHelper.getPluginPrefix(e):n["default"].getPluginPrefix(e)},e.prototype.openShopUrlAtWebBrowser=function(e){window.pluginID=e,window.PluginHelper?window.PluginHelper.getPluginPrefix((function(e){window.PluginHelper.openShopUrlAtWebBrowser(e+window.pluginID)})):window.open("https://market.fanruan.com/plugin/"+e)},e.prototype.getPackInfo=function(e){var t=this;window.PluginHelper?window.PluginHelper.getPackInfo(e):n["default"].reqGetProjectInfo((function(i){var n=i;t.isWar=n.war,e(i)}))},e.prototype.getLoginInfo=function(e){window.PluginHelper?window.PluginHelper.getLoginInfo(e):n["default"].reqGetLoginInfo((function(t){e(t)}))},e.prototype.getPriviteMessage=function(){window.PluginHelper?window.PluginHelper.getPriviteMessage():window.open("http://bbs.fanruan.com/home.php?mod=space&do=pm")},e.prototype.getProgress=function(e,t){window.PluginHelper?window.PluginHelper.getProgress(e,t):this.useSocketIo(e,t)},e.prototype.useSocketIo=function(e,t){window.PluginHelper?window.PluginHelper.useSocketIo(e,t):n["default"].useSocketIo(e,t)},e.prototype.uninstallPlugin=function(e,t,i){var r=this;window.PluginHelper?window.PluginHelper.uninstallPlugin(e,t,i):this.isWar?o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster")):window.PluginHelper?window.PluginHelper.uninstallPlugin(e,i):n["default"].showConfirmDialog(s.i18nText("Dec-Upm_Shop_Delete_Confirmed"),(function(){r.getProgress("uninstall",(function(t){if(t&&t.progress&&i(t.progress),t&&t.status){i.call(r,t.status);var n=t.info||"";"success"===t.status?o["default"].message(n+s.i18nText("Dec-Upm_Shop_Delete_Success")):"failed"===t.status&&("30"===t.errorCode?o["default"].confirm(s.i18nText("Dec-Upm_Shop_Delete_Dependence"),(function(){this.uninstallPlugin(e,!0,i)})):o["default"].message(n))}})),n["default"].uninstallPlugin({pluginMarker:e,forceDelete:t},(function(e){i(e)}))}))},e.prototype.setPluginActive=function(e,t){var i=this;window.PluginHelper?window.PluginHelper.setPluginActive(e,t):this.isWar?o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster")):(this.getProgress("modify",(function(e){if(e&&e.progress&&t(e.progress),e&&e.status){if("failed"===e.status)return void o["default"].message(e.info);t.call(i,e.status),"forbid"===e.pluginStatus?o["default"].message(s.i18nText("Dec-Upm_Shop_Has_Been_Disabled")):"active"===e.pluginStatus&&o["default"].message(s.i18nText("Dec-Upm_Shop_Has_Been_Actived"))}})),n["default"].setPluginActive({pluginInfo:e},(function(e){t(e)})))},e.prototype.showFileChooserWithFilter=function(e,t){return window.PluginHelper?window.PluginHelper.showFileChooserWithFilter(e,t):"local_temp.zip"},e.prototype.updatePluginFromDisk=function(e,t,i){var r=this;window.PluginHelper?window.PluginHelper.updatePluginFromDisk(e,i):this.isWar?o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster")):(this.getProgress("update_from_disk",(function(n){if(n&&n.progress&&i(n.progress),n&&n.status){i.call(r,n.status);var l=n.info||"";"success"===n.status?o["default"].message(l+s.i18nText("Dec-Upm_Shop_Update_Success"),(function(){location.reload()})):"failed"===n.status&&("35"===n.errorCode?o["default"].confirm(s.i18nText("Dec-Upm_Shop_No_Plugin_Update"),(function(n){n?r.installPluginFromDisk(e,t,i):i("success")})):o["default"].message(l))}})),e&&n["default"].updatePluginFromDisk(e,t,(function(e){i(e)})))},e.prototype.installPluginFromDisk=function(e,t,i){var r=this;window.PluginHelper?window.PluginHelper.installPluginFromDisk(e,(function(){location.reload()})):this.isWar?o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster")):(this.getProgress("install_from_disk",(function(n){if(n&&n.progress&&i(n.progress),n&&n.status){i.call(r,n.status);var l=n.info||"";"success"===n.status?o["default"].message(l+s.i18nText("Dec-Upm_Shop_Install_Success"),(function(){location.reload()})):"failed"===n.status&&("37"===n.errorCode?o["default"].confirm(s.i18nText("Dec-Upm_Shop_Has_Install_Lower"),(function(){r.updatePluginFromDisk(e,t,i)})):o["default"].message(l))}})),e&&n["default"].installPluginFromDisk(e,t,(function(e){i(e)})))},e.prototype.installPluginOnline=function(e,t){var i=this;window.PluginHelper?window.PluginHelper.installPluginOnline(e,t):this.isWar?o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster")):(this.getProgress("install",(function(n){if(n&&n.progress&&t(n.progress),n&&n.status){t.call(i,n.status);var r=n.info||"";"success"===n.status?o["default"].message(r+s.i18nText("Dec-Upm_Shop_Install_Success")):"failed"===n.status&&("37"===n.errorCode?o["default"].confirm(s.i18nText("Dec-Upm_Shop_Has_Install_Lower"),(function(){i.updatePluginOnline([e],t)})):o["default"].message(r))}})),n["default"].installPluginOnline({pluginInfo:e},(function(e){})))},e.prototype.updatePluginOnline=function(e,t){var i=this;if(window.PluginHelper)window.PluginHelper.updatePluginOnline(e,t);else if(this.isWar)o["default"].message(s.i18nText("Dec-Upm_Shop_Error_No_Support_In_War_Or_Cluster"));else{var r=[],l=0,a=!1,u=function(e){if(e){var i=e.info||"";"success"===e.status?(o["default"].message(i+s.i18nText("Dec-Upm_Shop_Update_Success"),(function(){u(r[l]),l!==r.length?l++:location.reload()})),t("success")):"failed"===e.status&&(o["default"].message(i,(function(){u(r[l]),l++})),t("success"))}};this.getProgress("update",(function(e){e&&e.progress&&t(e.progress),e&&e.status&&(t.call(i,e.status),r.push(e),a||(u(r[0]),l++,a=!0))})),n["default"].updatePluginOnline(e,(function(e){t(e)}))}},e.prototype.readUpdateOnline=function(e){window.PluginHelper?window.PluginHelper.readUpdateOnline(e):n["default"].reqGetInstallPluginUpdateList(e)},e.prototype.registerHref=function(){window.PluginHelper?window.PluginHelper.registerHref():window.open("http://id.fanruan.com/register/register.php?clueSource=activityfr")},e.prototype.forgetHref=function(){window.PluginHelper?window.PluginHelper.forgetHref():window.open("http://id.fanruan.com/forget/forget.php?clue=activityf")},e.prototype.defaultLogin=function(e,t,i){var o=this;if(window.PluginHelper)window.PluginHelper.defaultLogin(e,t,i);else{var r={username:s.encode(e),password:s.encode(t)};n["default"].defaultLogin(r,(function(e){o.setLoginUser(e.username),i(e.loginTag)}))}},e.prototype.clearUserInfo=function(e){window.PluginHelper?window.PluginHelper.clearUserInfo():n["default"].clearUserInfo(e)},e}();t["default"]=new r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLUGIN_FILTERS_CUSTOM=t.PLUGIN_FILTERS_CATEGORY=t.PLUGIN_FILTERS_CATEGORIES=t.PLUGIN_FILTERS=void 0,t.PLUGIN_FILTERS={seller:[{text:"Dec-Upm_Shop_Store_Official",name:"seller-finereport",status:"seller"},{text:"Dec-Upm_Shop_Store_Not_Official",name:"seller-developer",status:"seller"}],fee:[{text:"Dec-Upm_Shop_Store_Pay",name:"fee-charge",status:"fee"},{text:"Dec-Upm_Shop_Store_Free",name:"fee-free",status:"fee"}],scope:[{text:"Dec-Upm_Shop_Store_Scope_Current",name:"scope-universal",status:"scope"},{text:"Dec-Upm_Shop_Store_Scope_Program",name:"scope-program",status:"scope"}]},t.PLUGIN_FILTERS_CATEGORIES="categories",t.PLUGIN_FILTERS_CATEGORY="category",t.PLUGIN_FILTERS_CUSTOM="custom"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showLogin=void 0;var n=i(21),o=null;t.showLogin=function(e){o?o.setVisible(!0):o=BI.createWidget({type:n["default"],element:"#login",listeners:[{eventName:n.EVENT_LOGIN,action:function(t){e&&e(t)}}]})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13),o=i(0),s={confirm:function(e,t){var i=BI.UUID();BI.Popovers.create(i,{type:o.BarPopOver,width:450,height:220,header:BI.i18nText("Dec-Upm_Shop_Dialog_Title"),body:{type:n["default"],height:140,message:e},listeners:[{eventName:BI.Popover.EVENT_CONFIRM,action:function(){t&&t(!0)}}]}).open(i)},message:function(e,t){BI.Msg.alert(BI.i18nText("Dec-Upm_Shop_Dialog_Title"),e,t)}};t["default"]=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(40);i(41);var s=i(1),r=i(42);t.className="dec.upm.plguin.conponents.plugin",t.Widget=BI.inherit(BI.BasicButton,{props:{baseCls:"dec-upm-plguin-conponents-plugin",isInstalled:!0},_store:function(){return BI.Models.getModel(o["default"])},watch:{pluginSelected:function(e){var t=this.options.id;this.selectedIcon.setVisible(e===t.toString()),this.setSelected(e===t.toString())},width:function(e){this.imageLayout.setHeight(e-30)}},render:function(){var e=this,t=this.options,i=t.id,o=t.name,l=t.version,a=t.pic,u=t.selected,c=t.price,d=t.description,p=t.vendor,g=t.requiredJarTime,f=t.jartime,m=t.uploadTime,h=t.switchedReason,_=t.free,v=t.isInstalled,I=t.licDamaged,b=t.leftDays,y=t.available,P=t.onTrial,S=!!a,N=BI.i18nText("Dec-Upm_Shop_Store_Free");return v?I?N=BI.i18nText("Dec-Upm_Shop_Store_Jar_Damaged"):"number"!=typeof b||_||(y?N=(P?BI.i18nText("Dec-Upm_Shop_Designer_Trial"):BI.i18nText("Dec-Upm_Shop_Store_Authorize"))+(b>9999?BI.i18nText("Dec-Upm_Shop_Store_Permanent"):b+BI.i18nText("Dec-Upm_Shop_Store_Day")):!1===y&&(N=(P?BI.i18nText("Dec-Upm_Shop_Designer_Trial"):BI.i18nText("Dec-Upm_Shop_Store_Authorize"))+BI.i18nText("Dec-Upm_Shop_Store_Expired"))):N=c?-1===c?BI.i18nText("Dec-Upm_Shop_Consulting_Sales"):"¥"+c:BI.i18nText("Dec-Upm_Shop_Store_Free"),{type:n.BubbleCombo,trigger:"hover",isNeedAdjustHeight:!1,el:{type:n.Vertical,hgap:5,tgap:5,items:[{type:n.Vertical,cls:"bi-card bi-border plugin-item",items:[{type:n.Absolute,ref:function(t){e.imageLayout=t},height:this.model.width-30,items:[{el:{type:n.CenterAdapt,items:[{type:n.Img,src:this._buildResourceUrl(a)}]},top:5,left:10,right:10,bottom:5},{el:{type:n.Layout,cls:"background-plugin-selected",invisible:!u,width:25,height:25,ref:function(t){e.selectedIcon=t}},right:0},this._renderPluginType()]},{type:n.Vertical,height:38,hgap:5,items:[{type:n.Label,text:o},{type:n.Label,cls:"plugin-version bi-high-light",text:v?_?"V"+l:"V"+l+N:"V"+l}]}]}]},popup:{el:{type:n.Vertical,items:[{type:n.Htape,cls:"plugin-tooltip-title",height:35,items:[{type:n.Label,height:35,lgap:5,textAlign:"left",text:o},{el:{type:n.Label,cls:"plugin-tooltip-cost",height:35,text:N},width:70}]},h?{type:n.Label,cls:"bi-error",text:h,whiteSpace:"normal",textAlign:"left",hgap:5,vgap:5}:{type:n.Layout},{type:n.HtmlLabel,text:d,whiteSpace:"normal",textAlign:"left",width:295,hgap:5,vgap:5},{type:n.LeftRightVerticalAdapt,hgap:5,vgap:10,items:{right:[{type:"bi.button",width:50,invisible:!S,text:BI.i18nText("Dec-Upm_Shop_LearnMore"),handler:function(){s["default"].openShopUrlAtWebBrowser(i)}}]}},{type:n.LeftRightVerticalAdapt,cls:"bi-border-top",items:{left:[{type:n.Label,cls:"bi-tips",hgap:5,tgap:5,textAlign:"left",text:BI.i18nText("Dec-Upm_Shop_Store_Developer")+"："+(p.indexOf("finereport")>=0?BI.i18nText("Dec-Upm_Shop_Store_Finereport"):p)}],right:[{type:n.Label,cls:"bi-tips",hgap:5,tgap:5,textAlign:"right",text:BI.i18nText("Dec-Upm_Shop_Store_Jar")+"："+(S?r.getDateTime(f):r.getDateTime(g))}]}},{type:n.LeftRightVerticalAdapt,vgap:5,items:{left:[{type:n.Label,cls:"bi-tips",hgap:5,textAlign:"left",text:BI.i18nText("Dec-Upm_Shop_Store_Version")+"："+l}],right:[{type:n.Label,cls:"bi-tips",hgap:5,textAlign:"right",invisible:!S,text:BI.i18nText("Dec-Upm_Shop_Store_Update")+"："+r.getDateTime(m)}]}}]},minWidth:300}}},doClick:function(){var e=this.options.id;this.store.setSelected(e)},_buildResourceUrl:function(e){return e&&e.indexOf("http")>=0?e:s["default"].isDesigner()?"./img/product-01.png":FinePluginResourceURL+"/img/product-01.png"},_renderPluginType:function(){var e=this.options,t=e.needUpdate,i=void 0!==t&&t,o=e.active,s=void 0===o||o,r=e.selfState,l="";if(!s&&i?l="background-plugin-is-disable-new":s?i?l="background-plugin-need-update":1===(void 0===r?0:r)&&(l="background-plugin-cant-use"):l="background-plugin-is-disable",l)return{el:{type:n.Layout,cls:l,width:46,height:46}}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="dec.modelupm.plugin.online.content.filter";BI.model(n,BI.inherit(Fix.Model,{context:["filters"],actions:{}})),t["default"]=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(62),o=i(0);i(63),t.className="dec.upm.plugin.online.content.filter_button",t.Widget=BI.inherit(BI.BasicButton,{props:{baseCls:"dec-upm-content-filter-button"},watch:{filters:function(e){var t=this.options.name;this.setSelected(BI.some(e,(function(e,i){return i.name===t})))}},_store:function(){return BI.Models.getModel(n["default"])},render:function(){var e=this.options.text;return{type:o.Label,hgap:5,height:21,text:BI.i18nText(e)}},doClick:function(){var e=this.options,t=e.text,i=e.name,n=e.status;this.store.addFilters({text:t,name:i,status:n})}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o="dec.model.upm.plugin.online.content.filter_search",s={context:["filters"],actions:{removeFilter:function(e){this.model.filters=BI.filter(this.model.filters,(function(t,i){return i.name!==e}))},search:function(e){this.model.filters=[{text:BI.i18nText("Dec-Upm_Shop_Store_Key_Word")+":"+e,name:e,status:n.PLUGIN_FILTERS_CUSTOM}]}}};BI.model(o,BI.inherit(Fix.Model,s)),t["default"]=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(10);BI.addI18n(Store.i18n),BI.createWidget({type:"bi.vertical",element:"#store",items:[{type:n["default"]}]})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(1),s=i(15),r=i(17),l=i(45),a=i(72);t.className="dec.upm.plugin.shop",t.Widget=BI.inherit(BI.Widget,{_store:function(){return BI.Models.getModel(a["default"])},render:function(){return{type:n.Vertical,scrolly:!0,items:this._renderItems()}},_renderItems:function(){return[o["default"].isDesigner()?{type:s["default"]}:null,{type:n.Htape,height:660,tgap:5,items:[{el:{type:l["default"]},width:.65},{el:{type:r["default"]},width:.35}]}]}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListView=t.VirtualGroup=t.LeftRightVerticalAdapt=t.Left=t.Vertical=t.Absolute=t.Layout=t.Htape=t.CenterAdapt=t.Vtape=t.VerticalAdapt=t.BubbleCombo=t.Img=t.Tab=t.SingleSelectInsertCombo=t.SingleSelectRadioItem=t.MultiTreePopupView=t.Editor=t.NicEditor=t.RichEditor=t.MultiTreeCombo=t.DynamicDateTimeCombo=t.DynamicDateCombo=t.BarPopOver=t.MultiSelectItem=t.TextAreaEditor=t.AllValueChooserCombo=t.ButtonGroup=t.MultiSelectInsertCombo=t.TextEditor=t.Button=t.SignEditor=t.MultiFileEditor=t.SmallTextEditor=t.HtmlLabel=t.Label=t.DownListCombo=t.TextButton=t.IconChangeButton=t.IconButton=t.IconTextIconItem=t.IconTextItem=void 0,t.IconTextItem="bi.icon_text_item",t.IconTextIconItem="bi.icon_text_icon_item",t.IconButton="bi.icon_button",t.IconChangeButton="bi.icon_change_button",t.TextButton="bi.text_button",t.DownListCombo="bi.down_list_combo",t.Label="bi.label",t.HtmlLabel="bi.html_label",t.SmallTextEditor="bi.small_text_editor",t.MultiFileEditor="bi.multifile_editor",t.SignEditor="bi.sign_editor",t.Button="bi.button",t.TextEditor="bi.text_editor",t.MultiSelectInsertCombo="bi.multi_select_insert_combo",t.ButtonGroup="bi.button_group",t.AllValueChooserCombo="bi.all_value_chooser_combo",t.TextAreaEditor="bi.textarea_editor",t.MultiSelectItem="bi.multi_select_item",t.BarPopOver="bi.bar_popover",t.DynamicDateCombo="bi.dynamic_date_combo",t.DynamicDateTimeCombo="bi.dynamic_date_time_combo",t.MultiTreeCombo="bi.multi_tree_combo",t.RichEditor="bi.rich_editor",t.NicEditor="bi.nic_editor",t.Editor="bi.editor",t.MultiTreePopupView="bi.multi_tree_popup_view",t.SingleSelectRadioItem="bi.single_select_radio_item",t.SingleSelectInsertCombo="bi.single_select_insert_combo",t.Tab="bi.tab",t.Img="bi.img",t.BubbleCombo="bi.bubble_combo",t.VerticalAdapt="bi.vertical_adapt",t.Vtape="bi.vtape",t.CenterAdapt="bi.center_adapt",t.Htape="bi.htape",t.Layout="bi.layout",t.Absolute="bi.absolute",t.Vertical="bi.vertical",t.Left="bi.left",t.LeftRightVerticalAdapt="bi.left_right_vertical_adapt",t.VirtualGroup="bi.virtual_group",t.ListView="bi.list_view"},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DecCst=t.Dec=void 0;var o=i(4),s=i(14),r=window.parent.Dec;t.Dec=r;var l=window.parent.io,a=window.parent.DecCst;t.DecCst=a;var u=function(){function e(){}return e.prototype.reload=function(){alert(BI.i18nText("Dec-Upm_Shop_Upm_Update_Success"))},e.prototype.update=function(e){r?r.reqPost("/v10/plugin/store/update",{},(function(t){t.errorCode?e("error",t.errorCode):e("success","success")})):e("success","success")},e.prototype.getInstalledPlugins=function(e){r?r.reqGet("/v10/plugin/installation","getInstalledPlugins",(function(t){e(JSON.stringify(t.data))})):e(JSON.stringify(s["default"].InstalledPlugins))},e.prototype.getPluginCategories=function(e){r?r.reqGet("/v10/plugin/store/category",{},(function(t){e(JSON.stringify(t.data))})):e(JSON.stringify(s["default"].PluginCategories))},e.prototype.getPlugin=function(e,t){r?r.reqGet("/v10/plugin/store?"+r.Utils.transformObject2URLParam(e,null,!1),e,(function(e){t(JSON.stringify(e.data))})):t(JSON.stringify(s["default"].PluginFromStoreNew))},e.prototype.searchPlugin=function(e,t){r?r.reqGet("/v10/plugin/store/search?"+r.Utils.transformObject2URLParam({keyword:e},null,!1),e,(function(e){t(JSON.stringify(e.data))})):t(JSON.stringify(s["default"].PluginFromStoreNew))},e.prototype.getPluginPrefix=function(e){r?r.reqGet("/v10/plugin/store/url",{},(function(t){e(t.data)})):e("https://market.fanruan.com/plugin/")},e.prototype.installPluginFromDisk=function(e,t,i){if(r){var n={id:e,username:r.personal.username,filename:t};r.reqPost("/v10/plugin/disk/installation?"+r.Utils.transformObject2URLParam(n,null,!1),n,(function(e){i(e.data)}))}else i("")},e.prototype.updatePluginOnline=function(e,t){if(r){var i={username:r.personal.username};r.reqPut("/v10/plugin/store/installation?"+r.Utils.transformObject2URLParam(i,null,!1),e,(function(e){t(e.data)}))}else t("")},e.prototype.uninstallPlugin=function(e,t){if(r){var i=n(n({},e),{username:r.personal.username});r.reqDelete("/v10/plugin/installation?"+r.Utils.transformObject2URLParam(i,null,!1),i,t)}else t("")},e.prototype.reqGetInstallPluginUpdateList=function(e){r?r.reqGet("/v10/plugin/installation/update",{},(function(t){e(JSON.stringify(t.data))})):e(JSON.stringify(s["default"].needUpdate))},e.prototype.installPluginOnline=function(e,t){if(r){var i=n(n({},e),{username:r.personal.username});r.reqPost("/v10/plugin/store/installation?"+r.Utils.transformObject2URLParam(i,null,!1),i,t)}else t("")},e.prototype.setPluginActive=function(e,t){if(r){var i=n(n({},e),{username:r.personal.username});r.reqPut("/v10/plugin/installation/status?"+r.Utils.transformObject2URLParam(i,null,!1),i,t)}else t("success")},e.prototype.updatePluginFromDisk=function(e,t,i){var n={id:e,username:r.personal.username,filename:t};r?r.reqPut("/v10/plugin/disk/installation?"+r.Utils.transformObject2URLParam(n,null,!1),n,(function(e){i(e.data)})):i()},e.prototype.reqGetProjectInfo=function(e){r?r.reqGet("/v10/plugin/store/project",{},(function(t){e(t.data)})):e({shopOption:null,war:!1})},e.prototype.reqGetLoginInfo=function(e){r?r.reqGet("/v10/plugin/store/login",{},(function(t){e(t.data)})):e("alan")},e.prototype.defaultLogin=function(e,t){if(r)r.reqPost("/v10/plugin/store/login",e,(function(e){t(e.data)}));else{t({username:"langwenda",loginTag:"0",uuid:2})}},e.prototype.clearUserInfo=function(e){r?r.reqDelete("/v10/plugin/store/login",{},(function(t){e(t.data)})):e()},e.prototype.showConfirmDialog=function(e,t){o["default"].confirm(e,(function(e){e&&t()}))},e.prototype.useSocketIo=function(e,t){if(l){var i="plugin_status_"+e;r.socket.hasListeners(i)&&r.socket.removeListener(i),r.socket.on(i,(function(e){t.call(this,e)}))}},e}();t["default"]=new u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0);t.className="dec.upm.shared.dialog.confirm",t.Widget=BI.inherit(BI.Widget,{props:{message:""},render:function(){return{type:n.CenterAdapt,items:[{type:n.VerticalAdapt,hgap:20,items:[{type:n.Layout,cls:"background-dialog-confirm",width:50,height:50},{type:n.Label,text:this.options.message}]}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.InstalledPlugins=[{id:"com.fr.plugin.mobile.web",name:"HTML5移动端展现",version:"10.2.21",envVersion:"10.0",description:"除了原生App展示报表外，提供移动浏览器预览报表,表单以及决策系统的插件，可用于微信,钉钉以及App中集成",changeNotes:"",vendor:"FineMobile",price:"",active:!1,hidden:!1,free:!0,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2018-11-06",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.bigScreen.v10",name:"扩展图表",version:"3.0",envVersion:"10.0",description:"扩展图表",changeNotes:"",vendor:"finereport.chart",price:"",active:!1,hidden:!1,free:!0,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2019-3-1",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.pageOffset.v10",name:"打印偏移",version:"1.3.2",envVersion:"10.0",description:"安装此插件后页面打印偏移可与当前用户一同使用，保存用户设置部分.",changeNotes:"",vendor:"lee",price:"2000",active:!1,hidden:!1,free:!1,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2018-07-26",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.customsubmmit.v10",name:"上传下载文件",version:"6.1.1",envVersion:"10.0",description:"经常有这样的需求,需要将文件上传到服务器保存。以前FR实现此功能需要自定义函数，也就是自己写代码实现。比较麻烦，而且对不熟悉java的帆薯们来说更是手足无措；\n因此我们开发了这么一款插件，将此功能封装，安装此插件后，可以通过可视化界面操作，简洁方便，一目了然",changeNotes:"",vendor:"finereport.zack",price:"",active:!0,hidden:!1,free:!1,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2019-06-11",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.reportRefresh.v10",name:"表单内报表块刷新",version:"1.5",envVersion:"10.0~",description:"实现表单报表块内实现页面自动刷新",changeNotes:"",vendor:"finereport",price:"",active:!0,hidden:!1,free:!0,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2018-07-31",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.exportform.v10",name:"决策报表导出",version:"3.4",envVersion:"10.0",description:"支持决策报表整体导出到Excel和PDF文件.",changeNotes:"",vendor:"finereport.neil.zack",price:"",active:!0,hidden:!1,free:!0,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2018-07-18",licDamaged:!1,leftDays:2147483647,onTrial:!1},{id:"com.fr.plugin.enginex",name:"新计算引擎",version:"0.8.3",envVersion:"10.0~",description:"安装插件后, 可以打开后缀为cptx的文件, 使用新的引擎计算报表.",changeNotes:"",vendor:"finereport",price:"",active:!0,hidden:!1,free:!0,available:!0,deadline:"永久",registerFailed:!1,selfState:0,switchedReason:"",requiredJarTime:"2019-08-14",licDamaged:!1,leftDays:2147483647,onTrial:!1}],this.PluginCategories=[{name:"设计器",id:1},{name:"前端展现",id:2},{name:"填报",id:3},{name:"图表",id:4},{name:"决策平台",id:5},{name:"导出打印",id:6},{name:"移动端",id:7},{name:"部署集成",id:8},{name:"数据接口",id:9},{name:"控件组件",id:10},{name:"函数",id:15},{name:"主题",id:16},{name:"FineBI",id:17}],this.PluginFromStoreNew=[{id:797,name:"10.0高级数据库查询",price:0,pic:"https://shopres.finereport.com/com.fr.plugin.sqlbuilderplus.v10.181211165024.png",cid:1,version:"2.2",pluginid:"com.fr.plugin.sqlbuilderplus.v10",envversion:"10.0",jartime:"2018-10-16T16:00:00.000Z",vendor:"aedless",sellerId:113,uploadTime:"2019-04-03T06:43:34.000Z",downloadTimes:157,description:"1.支持数据权限管理    2.支持语法提示、自动补全和代码美化    3.优化在sql中加入帆软公式支持    4.支持可视化的sql builder",scope:0,link:"plugin"},{id:776,name:"文档在线预览控件",price:1e4,pic:"https://shopres.finereport.com/com.fr.plugin.pdfpreview.181121131529.png",cid:10,version:"1.2.0",pluginid:"com.fr.plugin.pdfpreview",envversion:"9.0",jartime:"2017-08-14T16:00:00.000Z",vendor:"canvasjoe",sellerId:83,uploadTime:"2018-11-21T07:39:41.000Z",downloadTimes:80,description:"支持doc、docx、ppt、pptx格式文档转为PDF在线预览，支持添加水印及下载权限控制",scope:0,link:"plugin"},{id:788,name:"R语言图表插件",price:5e3,pic:"https://shopres.finereport.com/com.fr.plugin.rinfr.181203144933.png",cid:4,version:"1.2",pluginid:"com.fr.plugin.rinfr",envversion:"9.0",jartime:"2017-10-19T16:00:00.000Z",vendor:"aedless",sellerId:113,uploadTime:"2019-01-25T07:44:07.000Z",downloadTimes:20,description:"输入你熟悉的r语言，利用内置的函数获取fr数据集的数据，享受代码生成图表一手掌控的感觉",scope:0,link:"plugin"},{id:779,name:"ArcGis地图插件",price:3e3,pic:"https://shopres.finereport.com/com.fr.plugin.arcgismap.181126174750.png",cid:4,version:"1.1.4",pluginid:"com.fr.plugin.arcgismap",envversion:"8.0",jartime:"2017-08-14T16:00:00.000Z",vendor:"canvasjoe",sellerId:83,uploadTime:"2019-01-14T23:33:22.000Z",downloadTimes:72,description:"ArcGis地图插件，支持local server，支持点图和热力图模式",scope:0,link:"plugin"},{id:799,name:"时间节点图",price:2e3,pic:"https://shopres.finereport.com/com.fr.plugin.timeaxischart.181220155446.png",cid:4,version:"1.1.0",pluginid:"com.fr.plugin.timeaxischart",envversion:"8.0",jartime:"2017-08-14T16:00:00.000Z",vendor:"Beibei",sellerId:118,uploadTime:"2018-12-24T10:01:39.000Z",downloadTimes:55,description:"时间节点图插件，支持横向纵向模式，自动刷新",scope:0,link:"plugin"},{id:657,name:"3D卡片动画",price:3e3,pic:"https://shopres.finereport.com/com.ray.plugin.periodicchart.171215131340.png",cid:4,version:"1.3.1",pluginid:"com.ray.plugin.periodicchart",envversion:"8.0",jartime:"2017-08-14T16:00:00.000Z",vendor:"Ray",sellerId:89,uploadTime:"2018-11-29T03:24:26.000Z",downloadTimes:140,description:"3D卡片动画为三维场景下的多图片展现提供了解决方案，即以3D卡片的方式展示和播放动画。    该插件利用了浏览器webgl的强大性能，提供了流畅的动画和独特视觉效果。    主要适用于企业的各类产品、产品线中不同功能点的汇总展示。    支持配置基本样式，动画参数，相机位置。",scope:0,link:"plugin"},{id:649,name:"条形饼图组合图",price:2e3,pic:"https://shopres.finereport.com/com.fr.plugin.timelinegallery.171207190247.png",cid:4,version:"1.1.0",pluginid:"com.fr.plugin.timelinegallery",envversion:"8.0",jartime:"2017-08-14T16:00:00.000Z",vendor:"canvasjoe",sellerId:83,uploadTime:"2018-11-26T09:51:30.000Z",downloadTimes:185,description:"支持条形图与饼图或南丁格尔玫瑰图的组合图，组合展现了不同分类下的多个系列的详细信息；还支持时间轴功能，支持更高维度上的数据筛选，适用于展示型的数据报告或者作战大屏。",scope:0,link:"plugin"}],this.needUpdate=[{pluginId:"com.fr.plugin.bigScreen.v10"}]};t["default"]=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(1);i(16),t.className="dec.upm.plugin.title",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plguin-title"},render:function(){return{type:n.LeftRightVerticalAdapt,height:30,items:{left:[{type:n.Label,lgap:10,text:BI.i18nText("Dec-Upm_Shop_Manager")}],right:[{type:n.IconButton,cls:"background-shop-title-close",height:16,width:16,rgap:10,handler:function(){o["default"].closeWindow()}}]}}},mounted:function(){}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(18),s=i(36),r=i(43);i(44),t.className="dec.upm.plugin.installed",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plguin-installed"},_store:function(){return BI.Models.getModel(r["default"])},render:function(){return{type:n.Vtape,hgap:10,items:[{el:{type:n.Label,cls:"upm-installed-title",textAlign:"left",height:30,lgap:12,text:BI.i18nText("Dec-Upm_Shop_Store_My_Plugins")},height:30},{type:n.Vtape,items:[{type:s["default"],cls:"bi-background"},{el:{type:o["default"],cls:"bi-border-top"},height:50}]}]}},clearSelected:function(){this.store.clearSelected()}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(19);i(20);var s=i(1),r=i(3),l=window.parent.Dec,a=window.parent.DecCst;t.className="dec.upm.plugin.installed.foot",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plugin-installed-foot"},_store:function(){return BI.Models.getModel(o["default"])},watch:{pluginSelected:function(e){var t=!e||this.model.selectedPlugin.active,i=!e||0===this.model.selectedPlugin.selfState;this.buttonDisable.setEnable(!!e),this.buttonDelete.setEnable(!!e),this.buttonDisable.setVisible(i),this.buttonUpdate.setText(e?BI.i18nText("Dec-Upm_Shop_Store_Update"):BI.i18nText("Dec-Upm_Shop_Store_Update-ALL")),this.buttonDisable.setText(t?BI.i18nText("Dec-Upm_Shop_Store_Disabled"):BI.i18nText("Dec-Upm_Shop_Store_Enable")),this.buttonUpdate.setEnable(this._canUpdate(e))},needUpdates:function(e){this.buttonUpdate.setEnable(e.length>0)}},render:function(){var e=this,t=this.model.pluginSelected;return{type:n.LeftRightVerticalAdapt,items:{left:[{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Disabled"),minWidth:40,height:30,hgap:5,disabled:!t,ref:function(t){e.buttonDisable=t},handler:function(){e.store.setPluginActive()}},{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Delete"),minWidth:40,height:30,hgap:5,disabled:!t,level:"error",ref:function(t){e.buttonDelete=t},handler:function(){e.store.uninstallPlugin()}}],right:[{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Update-ALL"),hgap:5,height:30,ref:function(t){e.buttonUpdate=t},handler:function(){e.model.isLogin?e.store.update():r.showLogin((function(t){e.store.setUserName(t),e.store.update()}))}},{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Update_From_Local"),hgap:5,height:30,handler:function(){e._updateFromDisk()}},{type:n.MultiFileEditor,url:s["default"].isDesigner()?"":this._getUploadUrl(),accept:"*.zip;",ref:function(t){e.uploadWidget=t},listeners:[{eventName:BI.MultifileEditor.EVENT_CHANGE,action:function(t){e.uploadWidget.upload(t)}},{eventName:BI.MultifileEditor.EVENT_UPLOADED,action:function(){var t=e.uploadWidget.getValue(),i=t[t.length-1];e.store.updateFromDisk(i.attach_id,i.filename)}}]}]}}},_canUpdate:function(e){return BI.some(this.model.needUpdates,(function(t,i){return i.pluginId===e}))},_getUploadUrl:function(){return l?l.fineServletURL+"/v10/attach/upload?width=32&height=32&"+a.Cookie.URL_TOKEN+"="+BI.Cache.getCookie(a.Cookie.TOKEN):""},_updateFromDisk:function(){if(s["default"].isDesigner()){var e=s["default"].showFileChooserWithFilter(BI.i18nText("Dec-Upm_Shop_Install_Package")+"(*.zip)","*.zip");e&&this.store.updateFromDisk(e)}else this.uploadWidget.select()}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0;var n=i(1);t.className="dec.upm.model.plugin.installed.foot",t.Model=BI.inherit(Fix.Model,{context:["pluginSelected","installedPlugins","needUpdates","userName","progress"],state:function(){},computed:{isLogin:function(){return!!this.model.userName},selectedPlugin:function(){var e=this;return BI.find(this.model.installedPlugins,(function(t,i){return i.id===e.model.pluginSelected}))},canUpdateAll:function(){return this.model.installedPlugins}},actions:{setUserName:function(e){this.model.userName=e},setMessage:function(e){this.model.message=e,this._refreshInstalledPlugins()},setPluginActive:function(){var e=this;this._getSelectedPlugin().then((function(t){n["default"].setPluginActive(t,(function(t){e._refreshInstalledPlugins()}))}))},uninstallPlugin:function(){var e=this;this._getSelectedPlugin().then((function(t){n["default"].uninstallPlugin(t,!1,(function(t){e._refreshInstalledPlugins()}))}))},update:function(){this.model.pluginSelected?this._updateSelected():this._updateAll()},updateFromDisk:function(e,t){var i=this;n["default"].updatePluginFromDisk(e,t,(function(e){"success"===e&&i._refreshInstalledPlugins()}))}},_refreshInstalledPlugins:function(){var e=this;n["default"].readUpdateOnline((function(t){t&&(e.model.needUpdates=JSON.parse(t)),n["default"].getInstalledPlugins((function(t){e.model.installedPlugins=JSON.parse(t),e.model.pluginSelected=""}))}))},_getSelectedPlugin:function(){var e=this.model,t=e.pluginSelected,i=e.installedPlugins;return new Promise((function(e,n){if(t){var o=BI.find(i,(function(e,i){return i.id===t}));e(o.id+"_"+o.version)}else n()}))},_updateSelected:function(){var e=this;this._getSelectedPlugin().then((function(t){n["default"].updatePluginOnline([t],(function(t){e._setProgress(t),"success"===t&&e._refreshInstalledPlugins()}))}))},_updateAll:function(){var e=this,t=this.model,i=t.needUpdates,o=t.installedPlugins,s=BI.filter(o,(function(e,t){return BI.some(i,(function(e,i){return i.pluginId===t.id}))})),r=BI.map(s,(function(e,t){return t.id+"_"+t.version}));n["default"].updatePluginOnline(r,(function(t){e._setProgress(t),"success"===t&&e._refreshInstalledPlugins()}))},_setProgress:function(e){if(e.indexOf("%")>=0){var t=parseInt(e.replace("%",""),10).toFixed(0);this.model.progress=t+"%"}"success"!==e&&"failed"!==e||(this.model.progress="")}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=t.EVENT_LOGIN=void 0;var n=i(0),o=i(22);Object.defineProperty(t,"EVENT_LOGIN",{enumerable:!0,get:function(){return o.EVENT_LOGIN}}),t.className="dec.upm.plguin.conponents.login",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plguin-component-login"},render:function(){var e=this;return{type:n.Absolute,items:[{el:{type:n.CenterAdapt,cls:"bi-z-index-mask",items:[{type:o["default"],cls:"bi-card bi-border",listeners:[{eventName:o.EVENT_CLOSE,action:function(){e.setVisible(!1)}},{eventName:o.EVENT_LOGIN,action:function(t){e.setVisible(!1),e.fireEvent(o.EVENT_LOGIN,t)}}]}],ref:function(t){e.loginLayout=t}},top:0,left:0,right:0,bottom:0}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=t.EVENT_LOGIN=t.EVENT_CLOSE=void 0;var n=i(0),o=i(23),s=i(24),r=i(25),l=i(26),a=i(28),u=i(31);Object.defineProperty(t,"EVENT_LOGIN",{enumerable:!0,get:function(){return u.EVENT_LOGIN}}),i(35),t.EVENT_CLOSE="EVENT_CLOSE",t.className="dec.upm.login",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-login",width:398,height:298},_store:function(){return BI.Models.getModel(o["default"])},watch:{loading:function(e){this.loading.setVisible(e)}},render:function(){var e=this;return{type:n.Absolute,items:[{el:{type:s["default"],listeners:[{eventName:"BasicButton.EVENT_CHANGE",action:function(){e.fireEvent(t.EVENT_CLOSE)}}]},right:5,top:5},{el:{type:n.Vertical,items:[{type:l["default"]},{type:u["default"],listeners:[{eventName:u.EVENT_LOGIN,action:function(t){e.fireEvent(u.EVENT_LOGIN,t)}}]},{type:a["default"]}]},top:30,left:35},{el:{type:r["default"],invisible:!0,ref:function(t){e.loading=t}},top:20}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});BI.model("dec.upm.login.model",BI.inherit(Fix.Model,{childContext:["loading"],state:function(){return{loading:!1}}})),t["default"]="dec.upm.login.model"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0);t.className="dec.upm.login.close.button",t.Widget=BI.inherit(BI.BasicButton,{render:function(){return{type:n.Layout,cls:"background-upm-close",width:12,height:12}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0);t.className="dec.upm.login.loading",t.Widget=BI.inherit(BI.Widget,{render:function(){return{type:n.Layout,width:400,height:270,cls:"background-upm-loading"}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0);i(27),t.className="dec.upm.login.title",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-login-title"},render:function(){return{type:n.Label,cls:"bi-font-bold",text:BI.i18nText("Dec-Upm_Shop_Login_Title")}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(29),o=i(0);i(30),t.className="dec.upm.login.foot",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-login-foot"},render:function(){return{type:o.LeftRightVerticalAdapt,height:20,items:{left:[{type:o.Label,cls:"bi-font-bold login-foot-text",textAlign:"left",text:BI.i18nText("Dec-Upm_Shop_No_Account")},{type:o.TextButton,cls:"bi-font-bold login-link",textAlign:"left",text:BI.i18nText("Dec-Upm_Shop_Sign_Up_Now"),handler:function(){n["default"].registerHref()}}],right:[{type:o.TextButton,cls:"bi-font-bold login-link",textAlign:"right",text:BI.i18nText("Dec-Upm_Shop_Forget_Password"),handler:function(){n["default"].forgetHref()}}]}}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errMessage=void 0;t.errMessage=[{code:-1,message:"Dec-Upm_Shop_Store_User_Not_Exist"},{code:-2,message:"Dec-Upm_Shop_Store_User_Password_Error"},{code:-3,message:"Dec-Upm_Shop_Error_UnexpectedError"},{code:-4,message:"Dec-Upm_Shop_Store_Net_Connect_Failed"},{code:-5,message:"Dec-Upm_Shop_Store_Not_Null"}];var n=window.LoginHelper,o=function(){function e(){}return e.prototype.closeWindow=function(){n?n.closeWindow():console.log("关闭窗口")},e.prototype.registerHref=function(){n?n.registerHref():window.open("http://id.fanruan.com/register/register.php?clueSource=activityfr")},e.prototype.forgetHref=function(){n?n.forgetHref():window.open("http://id.fanruan.com/forget/forget.php?clue=activityf")},e.prototype.defaultLogin=function(e,t,i){n?n.defaultLogin(e,t,i):i(-1)},e}();t["default"]=new o},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=t.EVENT_LOGIN=void 0;var n=i(0),o=i(32),s=i(1),r=i(33);i(34),t.EVENT_LOGIN="EVENT_LOGIN",t.className="dec.upm.login.body",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-login-body"},_store:function(){return BI.Models.getModel(o["default"])},watch:{errMessage:function(e){this.errMessage.setText(e)},loginResult:function(e){if(this.store.setLoading(!1),e){var i=r.getError(e);if(i)return this.store.setErrMessage(BI.i18nText(i)),void this.store.setLoginResult("");this.store.setLoginResult("");var n=this.userName.getValue();this.fireEvent(t.EVENT_LOGIN,n),this.userName.setValue(""),this.password.setValue(""),this.store.setErrMessage("")}}},render:function(){var e=this;return{type:n.Vertical,vgap:12,items:[{type:n.TextEditor,cls:"bi-background",watermark:BI.i18nText("Dec-Upm_Shop_Login_User_Name"),inputType:"text",allowBlank:!0,width:320,height:40,ref:function(t){e.userName=t},listeners:[{eventName:"EVENT_CHANGE",action:function(){e.store.setErrMessage("")}}]},{type:n.Editor,cls:"bi-border bi-background",watermark:BI.i18nText("Dec-Upm_Shop_Login_Password"),inputType:"password",allowBlank:!0,width:320,height:40,ref:function(t){e.password=t},listeners:[{eventName:"EVENT_CHANGE",action:function(){e.store.setErrMessage("")}}]},{type:n.Label,cls:"bi-error",textAlign:"left",text:"",ref:function(t){e.errMessage=t}},{type:n.Button,cls:"upm-login-button bi-font-bold",text:BI.i18nText("Dec-Upm_Shop_Login"),level:"common",height:40,handler:function(){e.login()}}]}},login:function(){var e=this,i=this.userName.getValue(),n=this.password.getValue();i&&n?(this.store.setLoading(!0),s["default"].defaultLogin(i,n,(function(i){if(e.store.setLoading(!1),i){var n=r.getError(i);if(n)return e.store.setErrMessage(BI.i18nText(n)),void e.store.setLoginResult("");e.store.setLoginResult("");var o=e.userName.getValue();e.fireEvent(t.EVENT_LOGIN,o),e.userName.setValue(""),e.password.setValue(""),e.store.setErrMessage("")}}))):this.store.setErrMessage(BI.i18nText("Dec-Upm_Shop_Store_Not_Null"))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0,t.className="dec.upm.model.login.body",t.Model=BI.inherit(Fix.Model,{context:["loading"],state:function(){return{errMessage:"",loginResult:""}},actions:{setErrMessage:function(e){this.model.errMessage=e},setLoading:function(e){this.model.loading=e},setLoginResult:function(e){this.model.loginResult=e}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getError=void 0;var n=[{code:-1,message:"Dec-Upm_Shop_Store_User_Not_Exist"},{code:-2,message:"Dec-Upm_Shop_Store_User_Password_Error"},{code:-3,message:"Dec-Upm_Shop_Error_UnexpectedError"},{code:-4,message:"Dec-Upm_Shop_Store_Net_Connect_Failed"},{code:-5,message:"Dec-Upm_Shop_Store_Not_Null"}];t.getError=function(e){var t=parseInt(e,10),i=BI.find(n,(function(e,i){return i.code===t}));return BI.get(i,"message","")}},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(37),o=i(38);t.className="dec.upm.plugin.installed.content",t.Widget=BI.inherit(BI.BasicButton,{_store:function(){return BI.Models.getModel(n["default"])},render:function(){return{type:o["default"]}},doClick:function(){this.store.clearSelected()}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="dec.model.upm.plugin.installed.content";BI.model(n,BI.inherit(Fix.Model,{context:["pluginSelected","installedPlugins","needUpdates"],actions:{clearSelected:function(){this.model.pluginSelected=""}}})),t["default"]=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var o=i(0),s=i(39),r=i(5),l=i(1);t.className="dec.upm.plugin.installed.plugins",t.Widget=BI.inherit(BI.LoadingPane,{props:{baseCls:"dec-upm-plguin-installed-plugins"},_store:function(){return BI.Models.getModel(s["default"])},watch:{search:function(){this.pluginsGroup.populate(this._getPlugins())},installedPluginsShow:function(){this.pluginsGroup.populate(this._getPlugins()),this.pluginNumber.setText(this._getInstalledNumbers())}},beforeInit:function(e){this.store.setNeedUpdates(e)},render:function(){var e=this,t=this;return{type:o.Vtape,hgap:10,ref:function(t){e.pluginsConstant=t},items:[{el:{type:o.LeftRightVerticalAdapt,items:{left:[{type:o.TextEditor,watermark:BI.i18nText("Dec-Upm_Shop_Store_Commodity_Description"),allowBlank:!0,width:145,height:30,ref:function(t){e.pluginSearch=t},listeners:[{eventName:BI.Editor.EVENT_CHANGE,action:function(){t.store.setSearch(this.getValue())}}]}],right:[{type:o.Label,cls:"bi-tips",text:this._getInstalledNumbers(),ref:function(t){e.pluginNumber=t}}]}},height:40},{type:o.ButtonGroup,layouts:[{type:o.Left,scrolly:!0,vgap:1}],items:this._renderPlugins(),ref:function(t){e.pluginsGroup=t}}]}},created:function(){var e=this;this._resize(),window.addEventListener("resize",(function(){e._resizeDelay()}))},beforeDestroy:function(){var e=this;window.removeEventListener("resize",(function(){e._resizeDelay()}))},_resizeDelay:function(){var e=this;this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout((function(){e._resize()}),500)},_resize:function(){var e=this.pluginsConstant.element[0].offsetWidth,t=l["default"].isDesigner();this.store.setWidth(t?e/2:e/3)},_renderPlugins:function(){return this._getPlugins(this.model.installedPluginsShow)},_getPlugins:function(){var e=this,t=this.model.search?BI.filter(this.model.installedPluginsShow,(function(t,i){return i.name.toLowerCase().indexOf(e.model.search.toLowerCase())>=0||i.version.indexOf(e.model.search)>=0||i.description.toLowerCase().indexOf(e.model.search.toLowerCase())>=0})):this.model.installedPluginsShow,i=l["default"].isDesigner();return BI.createItems(BI.map(t,(function(t,o){return n(n({type:r["default"],stopPropagation:!0,width:i?"50%":"33%",value:o.id,selected:e.model.pluginSelected===o.id},o),{needUpdate:BI.some(e.model.needUpdates,(function(e,t){return t.pluginId===o.id}))})})))},_getInstalledNumbers:function(){return""+BI.i18nText("Dec-Upm_Shop_Installed")+this.model.installedPluginsShow.length+BI.i18nText("Dec-Upm_Shop_Store_Plugins_Count")}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0;var n=i(1);t.className="dec.upm.model.plugin.installed.plugins",t.Model=BI.inherit(Fix.Model,{context:["pluginSelected","installedPlugins","needUpdates"],childContext:["width"],state:function(){return{search:"",width:0}},computed:{installedPluginsShow:function(){return BI.filter(this.model.installedPlugins,(function(e,t){return!t.hidden}))}},actions:{setSearch:function(e){this.model.search=e},setNeedUpdates:function(e){var t=this;n["default"].readUpdateOnline((function(i){i&&(t.model.needUpdates=JSON.parse(i)),t.setInstalledPlugins(e)}))},setInstalledPlugins:function(e){var t=this;n["default"].getInstalledPlugins((function(i){t.model.installedPlugins=JSON.parse(i),e&&e()}))},setWidth:function(e){this.model.width=e}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0,t.className="dec.upm.model.plguin.conponents.plugin",t.Model=BI.inherit(Fix.Model,{context:["pluginSelected","width"],actions:{setSelected:function(e){this.model.pluginSelected=e.toString()}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDateTime=void 0,t.getDateTime=function(e){return BI.date2Str(new Date(e),"yyyy/MM/dd")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0,t.className="dec.upm.model.plugin.installed",t.Model=BI.inherit(Fix.Model,{context:["installedPlugins"],childContext:["pluginSelected","needUpdates"],state:function(){return{pluginSelected:"",needUpdates:[]}},actions:{clearSelected:function(){this.model.pluginSelected=""}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(46);i(47);var o=i(0),s=i(48),r=i(51),l=i(52),a=i(58);t.className="dec.upm.plugin.online",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plguin-online"},_store:function(){return BI.Models.getModel(n["default"])},render:function(){return{type:o.Vtape,hgap:10,items:[{el:{type:o.Htape,items:[{type:r["default"],cls:"upm-online-title"},{el:{type:s["default"]},width:100}]},height:30},{type:o.Vtape,items:[{type:a["default"],cls:"bi-background"},{el:{type:l["default"],cls:"bi-border-top"},height:50}]}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0,t.className="dec.upm.model.plugin.online",t.Model=BI.inherit(Fix.Model,{childContext:["filters","onlinePlugins","pluginSelected"],state:function(){return{pluginSelected:"",filters:[],onlinePlugins:[]}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(49),s=i(3);i(50);var r=i(1);t.className="dec.upm.plguin.conponents.login_button",t.Widget=BI.inherit(BI.BasicButton,{beforeInit:function(e){this.store.setUserInfo(e)},_store:function(){return BI.Models.getModel(o["default"])},watch:{userName:function(e){this.userName.setText(e||BI.i18nText("Dec-Upm_Shop_Error_InvalidBBSCode")),this.userCombo.setValid(!!e)}},props:{baseCls:"dec-upm-plguin-component-loginbutton"},render:function(){var e=this;return{type:n.BubbleCombo,trigger:"hover",direction:"bottom",invalid:!this.model.userName,ref:function(t){e.userCombo=t},el:{type:n.Label,text:this.model.userName?this.model.userName:BI.i18nText("Dec-Upm_Shop_Error_InvalidBBSCode"),height:30,ref:function(t){e.userName=t}},popup:{el:{type:n.Vertical,vgap:5,hgap:5,items:[{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Private_Message"),cls:"user-button",height:30,handler:function(){r["default"].getPriviteMessage(),e.userCombo.hideView()}},{type:n.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Switch_Account"),cls:"user-button",height:30,handler:function(){r["default"].clearUserInfo((function(){})),e.store.setUserName(""),s.showLogin((function(t){e.store.setUserName(t)})),e.userCombo.hideView()}}]},minWidth:100,minHeight:70}}},doClick:function(){var e=this;!this.model.userName&&s.showLogin((function(t){e.store.setUserName(t)}))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0;var n=i(1);t.className="dec.model.upm.plguin.conponents.login",t.Model=BI.inherit(Fix.Model,{context:["userName"],actions:{setUserInfo:function(e){var t=this;n["default"].getLoginInfo((function(i){t.model.userName=i,e&&e()}))},setUserName:function(e){this.model.userName=e}}}),BI.model(t.className,t.Model),t["default"]=t.className},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(1);t.className="dec.upm.plugin.online.version",t.Widget=BI.inherit(BI.Widget,{render:function(){var e=this,t=FinePluginShopVersion,i=FinePluginShopNewVersion,o=Number(i)>Number(t);return{type:n.VerticalAdapt,hgap:5,items:[{type:n.Label,height:30,text:BI.i18nText("Dec-Upm_Shop_Store_App")},{type:n.Label,cls:"version-message",text:"V"+t},{type:n.TextButton,cls:"update-message",invisible:!o,text:BI.i18nText("Dec-Upm_Shop_Has_New_Version"),ref:function(t){e.updateMessage=t},handler:function(){e._onUpdate()}}]}},_onUpdate:function(){var e=this;o["default"].update((function(t,i){"success"===t?e.updateMessage.setText(o["default"].isDesigner()?BI.i18nText("Dec-Upm_Shop_Upm_Update_Success_Design"):BI.i18nText("Dec-Upm_Shop_Upm_Update_Success")):"error"===t?(alert(i),e.updateMessage.setText(BI.i18nText("Dec-Upm_Shop_Has_New_Version")),e.updateMessage.setValid(!0)):(e.updateMessage.setText(i),e.updateMessage.setValid(!1))}))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(53),o=i(0);i(54);var s=i(3),r=i(55),l=i(1),a=window.parent.Dec,u=window.parent.DecCst;t.className="dec.upm.plugin.online.foot",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plugin-online-foot"},_store:function(){return BI.Models.getModel(n["default"])},watch:{pluginSelected:function(e){this.buttonInstall.setEnable(!!e)}},render:function(){var e=this,t=this.model.pluginSelected;return{type:o.Htape,items:[{type:r["default"],hgap:15},{el:{type:o.VerticalAdapt,items:[{type:o.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Install"),hgap:5,minWidth:50,height:30,disabled:!t,ref:function(t){e.buttonInstall=t},handler:function(){e._installPlugin()}},{type:o.Button,text:BI.i18nText("Dec-Upm_Shop_Store_Install_From_Local"),hgap:5,height:30,handler:function(){if(l["default"].isDesigner()){var t=l["default"].showFileChooserWithFilter(BI.i18nText("Dec-Upm_Shop_Install_Package")+"(*.zip)","*.zip");t&&e.store.installPluginFromDisk(t)}else e.uploadWidget.select()}},{type:o.MultiFileEditor,url:l["default"].isDesigner()?"":this._getUploadUrl(),accept:"*.zip;",ref:function(t){e.uploadWidget=t},listeners:[{eventName:BI.MultifileEditor.EVENT_CHANGE,action:function(t){e.uploadWidget.upload(t)}},{eventName:BI.MultifileEditor.EVENT_UPLOADED,action:function(){var t=e.uploadWidget.getValue(),i=t[t.length-1];e.store.installPluginFromDisk(i.attach_id,i.filename)}}]}]},width:155}]}},_installPlugin:function(){var e=this;this.model.isLogin?this.store.installPlugin():s.showLogin((function(t){e.store.setUserName(t),e.store.installPlugin()}))},_getUploadUrl:function(){return a?a.fineServletURL+"/v10/attach/upload?width=32&height=32&"+u.Cookie.URL_TOKEN+"="+BI.Cache.getCookie(u.Cookie.TOKEN):""}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o={context:["pluginSelected","onlinePlugins","installedPlugins","userName","progress"],state:function(){return{}},computed:{isLogin:function(){return!!this.model.userName}},actions:{setUserName:function(e){this.model.userName=e},installPlugin:function(){var e=this,t=BI.find(this.model.onlinePlugins,(function(t,i){return i.id.toString()===e.model.pluginSelected})),i=t.pluginid+"_"+t.version;n["default"].installPluginOnline(i,(function(t){e._setProgress(t),"success"===t&&e._getInstalledPlugins()}))},installPluginFromDisk:function(e,t){var i=this;n["default"].installPluginFromDisk(e,t,(function(e){i._setProgress(e)}))}},_setProgress:function(e){if(e.indexOf("%")>=0){var t=parseInt(e.replace("%",""),10).toFixed(0);this.model.progress=t+"%"}"success"===e&&(this.model.progress="")},_getInstalledPlugins:function(){var e=this;n["default"].readUpdateOnline((function(t){t&&(e.model.needUpdates=JSON.parse(t)),n["default"].getInstalledPlugins((function(t){e.model.installedPlugins=JSON.parse(t)}))}))}};BI.model("dec.model.online.foot",BI.inherit(Fix.Model,o)),t["default"]="dec.model.online.foot"},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(56),o=i(0);i(57),t.className="dec.upm.plguin.conponents.progress",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plguin-conponents-progress"},_store:function(){return BI.Models.getModel(n["default"])},watch:{progress:function(e){this.progessBar.setVisible(!BI.isEmpty(e)),this.progessBlock.setWidth(e)}},render:function(){var e=this,t=this.model.progress;return{type:o.VerticalAdapt,invisible:BI.isEmpty(t),items:[{type:o.Left,cls:"progess-content",width:350,items:[{type:o.Layout,cls:"progess-block",width:t,height:10,ref:function(t){e.progessBlock=t}}]}],ref:function(t){e.progessBar=t}}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="dec.model.upm.plguin.conponents.progress",o={context:["progress"],computed:{showProgress:function(){return!BI.isEmpty(this.model.progress)}}};BI.model(n,BI.inherit(Fix.Model,o)),t["default"]=n},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(59),o=i(0),s=i(60),r=i(70);t.className="dec.upm.plugin.online.content",t.Widget=BI.inherit(BI.BasicButton,{props:{baseCls:"dec-upm-plugin-online-content"},_store:function(){return BI.Models.getModel(n["default"])},render:function(){return{type:o.Vtape,vgap:5,hgap:10,items:[{el:{type:s["default"]},height:200},{type:r["default"]}]}},doClick:function(){this.store.clearSelected()}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="dec.model.upm.plugin.online.content";BI.model(n,BI.inherit(Fix.Model,{context:["filters","onlinePlugins","pluginSelected"],state:function(){return{filters:[],onlinePlugins:[]}},actions:{clearSelected:function(){this.model.pluginSelected=""}}})),t["default"]=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(6),o=i(0),s=i(61),r=i(64),l=i(66),a=i(2);i(69),t.className="dec.upm.plugin.online.content.filter",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-upm-plugin-online-content-filter"},_store:function(){return BI.Models.getModel(n["default"])},render:function(){return{type:o.Vertical,items:[{type:s["default"],title:BI.i18nText("Dec-Upm_Shop_Store_Businesses"),filters:a.PLUGIN_FILTERS.seller},{type:s["default"],title:BI.i18nText("Dec-Upm_Shop_Store_Cost"),filters:a.PLUGIN_FILTERS.fee},{type:s["default"],title:BI.i18nText("Dec-Upm_Shop_Store_Scope"),filters:a.PLUGIN_FILTERS.scope},{type:o.Htape,height:55,items:[{el:{type:o.Label,cls:"filter-type-title",height:55,text:BI.i18nText("Dec-Upm_Shop_Store_Category")},width:65},{type:r["default"],tgap:8,cls:"bi-border-bottom"}]},{type:l["default"],vgap:5}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var o=i(6),s=i(0),r=i(7);t.className="dec.upm.plugin.online.content.filter_item",t.Widget=BI.inherit(BI.Widget,{props:{height:32,title:"",filters:[]},_store:function(){return BI.Models.getModel(o["default"])},render:function(){var e=this.options.title;return{type:s.Htape,items:[{el:{type:s.Label,cls:"filter-type-title",height:32,text:e},width:65},{type:s.VerticalAdapt,cls:"bi-border-bottom",items:this._renderFilters()}]}},_renderFilters:function(){var e=this.options.filters;return BI.map(e,(function(e,t){return n({type:r["default"],lgap:10},t)}))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r="dec.modelupm.plugin.online.content.filter_button",l={context:["filters"],actions:{addFilters:function(e){var t=BI.filter(this.model.filters,(function(e,t){return t.status!==s.PLUGIN_FILTERS_CUSTOM})),i=BI.some(t,(function(t,i){return i.status===e.status}));this.model.filters=i?BI.map(t,(function(t,i){return n(n({},i),{name:i.status===e.status?e.name:i.name,text:i.status===e.status?e.text:i.text})})):o(t,[e])}}};BI.model(r,BI.inherit(Fix.Model,l)),t["default"]=r},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(0),o=i(65),s=i(7),r=i(2);t.className="dec.upm.plugin.online.content.filter_type",t.Widget=BI.inherit(BI.LoadingPane,{_store:function(){return BI.Models.getModel(o["default"])},beforeInit:function(e){this.store.setTypeList(e)},render:function(){return{type:n.VerticalAdapt,items:[{type:n.Left,width:500,items:this._renderItems()}]}},_renderItems:function(){var e=this.model.typeList;return BI.map(e,(function(e,t){return{type:s["default"],lgap:10,text:t.name,name:r.PLUGIN_FILTERS_CATEGORY+"-"+t.id,status:r.PLUGIN_FILTERS_CATEGORIES}}))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var n=i(1),o="dec.modelupm.plugin.online.content.filter_type";t.Model=BI.inherit(Fix.Model,{state:function(){return{typeList:[]}},actions:{setTypeList:function(e){var t=this;n["default"].getPluginCategories((function(i){t.model.typeList=JSON.parse(i),e&&e()}))}}}),BI.model(o,t.Model),t["default"]=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var o=i(8),s=i(0),r=i(67),l=i(2);i(68),t.className="dec.upm.plugin.online.content.filter_search",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"dec-online-content-filter-search",height:30},_store:function(){return BI.Models.getModel(o["default"])},watch:{filters:function(e){BI.some(e,(function(e,t){return t.status===l.PLUGIN_FILTERS_CUSTOM}))||this.searchInput.setValue(""),e.length>0?this.searchItem.populate(this._renderItems(e)):this.searchItem.populate(this._renderDefault())}},render:function(){var e=this;return{type:s.Htape,items:[{type:s.VerticalAdapt,items:[{type:s.ButtonGroup,layouts:[{type:s.Left,hgap:5}],items:this._renderDefault(),ref:function(t){e.searchItem=t}}]},{el:{type:s.TextEditor,watermark:BI.i18nText("Dec-Upm_Shop_Store_Commodity_Description"),allowBlank:!0,height:30,listeners:[{eventName:BI.Editor.EVENT_ENTER,action:function(){e.store.search(e.searchInput.getValue())}}],ref:function(t){e.searchInput=t}},width:150}]}},_renderItems:function(e){return BI.createItems(BI.map(e,(function(e,t){return n({type:r["default"],cls:"search-item"},t)})))},_renderDefault:function(){return BI.createItems([{type:s.Label,cls:"search-item-title",text:BI.i18nText("Dec-Upm_Shop_Store_Recommend")}])}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var n=i(8),o=i(0);t.className="dec.upm.plugin.online.content.search_item",t.Widget=BI.inherit(BI.Widget,{props:{baseCls:"",text:"",height:25},_store:function(){return BI.Models.getModel(n["default"])},render:function(){var e=this,t=this.options,i=t.text,n=t.name;return{type:o.VerticalAdapt,items:[{type:o.Label,lgap:3,text:BI.i18nText(i)},{type:o.IconButton,width:17,height:17,cls:"background-close-button",rgap:3,handler:function(){e.store.removeFilter(n)}}]}}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=t.className=void 0;var o=i(71),s=i(0),r=i(5),l=i(1);t.className="dec.upm.plugin.online.content.plugins",t.Widget=BI.inherit(BI.LoadingPane,{props:{baseCls:"dec-upm-plguin-online-plugins"},_store:function(){return BI.Models.getModel(o["default"])},watch:{loading:function(e){e?this.loading():this.loaded()},onlinePlugins:function(e){this.pluginsGroup.populate(this._renderPlugins(e))}},beforeInit:function(e){this.store.setOnlinePlugins(e)},render:function(){var e=this,t=this.model.onlinePlugins;return{type:s.ButtonGroup,layouts:[{type:s.Left,scrolly:!0,ref:function(t){e.pluginsConstant=t}}],items:this._renderPlugins(t),ref:function(t){e.pluginsGroup=t}}},created:function(){var e=this;this._resize(),window.addEventListener("resize",(function(){e._resizeDelay()}))},beforeDestroy:function(){var e=this;window.removeEventListener("resize",(function(){e._resizeDelay()}))},_resizeDelay:function(){var e=this;this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout((function(){e._resize()}),500)},_resize:function(){var e=this.pluginsConstant.element[0].offsetWidth,t=l["default"].isDesigner();this.store.setWidth(t?e/4:e/6)},_renderPlugins:function(e){var t=this,i=l["default"].isDesigner();return BI.createItems(BI.map(e,(function(e,o){return n(n({type:r["default"],stopPropagation:!0,width:i?"25%":"16%",value:o.id,selected:t.model.pluginSelected===o.id},o),{isInstalled:!1})})))}}),BI.shortcut(t.className,t.Widget),t["default"]=t.className},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),o=i(2),s={context:["onlinePlugins","filters","pluginSelected"],childContext:["width"],state:function(){return{loading:!1,width:0}},actions:{setOnlinePlugins:function(e){var t=this;n["default"].getPlugin({categories:"",seller:"",fee:"",scope:""},(function(i){t.model.onlinePlugins=JSON.parse(i),e&&e()}))},setWidth:function(e){this.model.width=e}},watch:{filters:function(e){BI.some(e,(function(e,t){return t.status===o.PLUGIN_FILTERS_CUSTOM}))?this._searchPlugin(e):this._getPlugin(e)}},_searchPlugin:function(e){var t=this;this.model.loading=!0,n["default"].searchPlugin(e[0].name,(function(e){t.model.onlinePlugins=JSON.parse(e),t.model.loading=!1}))},_getPlugin:function(e){var t=this,i={categories:"",seller:"",fee:"",scope:""};BI.each(e,(function(e,t){i[t.status]=t.name})),this.model.loading=!0,n["default"].getPlugin(i,(function(e){t.model.onlinePlugins=JSON.parse(e),t.model.loading=!1}))}};BI.model("dec.model.content.plugins",BI.inherit(Fix.Model,s)),t["default"]="dec.model.content.plugins"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.className=void 0,t.className="dec.upm.model.plugin.shop",t.Model=BI.inherit(Fix.Model,{childContext:["installedPlugins","userName","progress"],state:function(){return{installedPlugins:[],userName:"",progress:""}}}),BI.model(t.className,t.Model),t["default"]=t.className}]);